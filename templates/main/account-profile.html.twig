{% extends 'base.html.twig' %}

{% block stylesheets %}
    <!-- Bootstrap 5.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}

{% block body %}
    <div class="container mt-4">

        <!-- Profile Card -->
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">Mon Compte</h4>
            </div>
            <div class="card-body">
                <div class="row align-items-center">
                    <!-- Profile Image -->
                    <div class="col-md-3 text-center">
                        <img src="/uploads/images/{{ app.user.img }}" class="rounded-circle img-fluid" alt="Avatar">
                    </div>
                    
                    <!-- User Details -->
                    <div class="col-md-9">
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="fw-bold text-uppercase">Dernière connexion</h6>
                                <p>{{ app.user.LastConnection|date('d/m/Y H:i:s') }}</p>
                            </div>
                            <div class="col-md-6">
                                <h6 class="fw-bold text-uppercase">Adresse IP</h6>
                                <p>{{ UserIP }}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <hr>

                <!-- Form -->
                {{ form_start(form, {'attr': {'class': 'mt-3'}}) }}
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="email" class="form-label">Email</label>
                        {{ form_widget(form.email, {'attr': {'class': 'form-control'}}) }}
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="discord-name" class="form-label">Pseudo Discord</label>
                        {{ form_widget(form.discordName, {'attr': {'class': 'form-control'}}) }}
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="user-name" class="form-label">Pseudo</label>
                        {{ form_widget(form.userName, {'attr': {'class': 'form-control'}}) }}
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="password" class="form-label">Ancien mot de passe</label>
                        {{ form_widget(form.password, {'attr': {'class': 'form-control'}}) }}
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="new-password" class="form-label">Nouveau mot de passe</label>
                        {{ form_widget(form.plainPassword.first, {'attr': {'class': 'form-control'}}) }}
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="repeat-password" class="form-label">Répétez votre nouveau mot de passe</label>
                        {{ form_widget(form.plainPassword.second, {'attr': {'class': 'form-control'}}) }}
                    </div>
                </div>

                <div class="mb-3">
                    <label for="profile-image" class="form-label">Photo de profil</label>
                    {{ form_widget(form.img, {'attr': {'class': 'form-control'}}) }}
                </div>

                <div class="text-end">
                    <button type="submit" class="btn btn-primary">Sauvegarder</button>
                </div>

                {{ form_end(form) }}
            </div>
        </div>
    </div><br>
{% endblock %}
